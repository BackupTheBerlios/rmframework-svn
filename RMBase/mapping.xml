<?xml version="1.0" encoding="UTF-8"?>

<project name="hibernateMapping" default="createSchema" basedir=".">
  
  
  <description>Mapping default tables on the database</description>
  <property file="ant.properties" />
  
  <target name="hibernate_init" depends="clean,dist,init">
    
    <echo>build.classes.dir: ${build.classes.dir}</echo>
    
    <path id="hibernate.path">
      <pathelement path="${javac.classpath}" />
      <pathelement path="${build.classes.dir}" />
      
    </path>
  </target>
  
  <target name="dist" depends="init,compile">
  </target>
  
  <target name="createSchema" description="Generates the database schema" depends="hibernate_init">
    
    
    
    <taskdef name="schemaexport" classname="org.hibernate.tool.hbm2ddl.SchemaExportTask"
             classpathref="hibernate.path" />
    <schemaexport output="schema-export.sql" config="${build.classes.dir}/hibernate.cfg.xml" quiet="no" text="no" drop="no" delimiter=";">
      <fileset dir="${build.classes.dir}">
        <include name="*.hbm.xml" />
      </fileset>
    </schemaexport>
  </target>
  
  <target name="createSchemaAnnotation" description="Generate the database schema with annotations" depends="hibernate_init">
    <taskdef name="hibernateTool" classname="org.hibernate.tool.ant.HibernateToolTask" 
             classpathref="hibernate.path" />
    
    <hibernateTool destdir="${basedir}">
      <annotationconfiguration  configurationfile="${build.classes.dir}/hibernate.cfg.xml"/>
      <!--annotationconfiguration configurationfile="${build.classes.dir}/hibernate.cfg.xml"/-->
      <!--hbm2ddl export="true" create="true" delimiter=";" format="true" outputfilename="schema-export.sql" /-->
      <!--hbm2ddl update="false" export="true" outputfilename="schema-export.sql" delimiter=";" format="true"/-->
      <hbm2ddl export="true" outputfilename="export.sql" create="true" update="false" format="true" drop="true"/>
      
    </hibernateTool>
  </target>
  
</project>